<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¯Ø±ÙˆØ³ØªÚ©Û•Ø±ÛŒ Ù¾Ø§Ø³Ù¾Û†Ø±Øª ðŸ”±</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #1a1a1a; color: white; text-align: center; padding: 20px; }
        .box { background: #2c2c2c; padding: 20px; border-radius: 15px; display: inline-block; width: 90%; max-width: 400px; }
        input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        button { background: #ff4500; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; width: 95%; font-weight: bold; }
        canvas { margin-top: 20px; border: 2px solid #555; max-width: 100%; border-radius: 10px; display: none; }
    </style>
</head>
<body>

    <div class="box">
        <h2>Passport System 2026</h2>
        <input type="text" id="fullName" placeholder="Ù†Ø§ÙˆÛŒ ØªÛ•ÙˆØ§Ùˆ (Ù†Ù…ÙˆÙˆÙ†Û•: FATEMA MAHMOOD)">
        <input type="text" id="pNum" placeholder="Ú˜Ù…Ø§Ø±Û•ÛŒ Ù¾Ø§Ø³Ù¾Û†Ø±Øª (Ù†Ù…ÙˆÙˆÙ†Û•: B1234567)">
        <input type="text" id="dob" placeholder="Ù…Û•ÙˆØ§Ù„ÛŒØ¯ (YYMMDD - Ù†Ù…ÙˆÙˆÙ†Û•: 980512)">
        <input type="text" id="expiry" placeholder="Ø¨Û•Ø³Û•Ø±Ú†ÙˆÙˆÙ† (Ù†Ù…ÙˆÙˆÙ†Û•: 330112)">
        <select id="gender" style="width: 95%; padding: 10px; margin: 10px 0;">
            <option value="F">Female (Ù…ÛŽ)</option>
            <option value="M">Male (Ù†ÛŽØ±)</option>
        </select>
        <label>ÙˆÛŽÙ†Û•ÛŒ Ú©Û•Ø³Û•Ú©Û• Ù‡Û•ÚµØ¨Ú˜ÛŽØ±Û•:</label>
        <input type="file" id="photoUpload" accept="image/*">
        <button onclick="processPassport()">Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù† Ùˆ Ø¯Ø§Ø¨Û•Ø²Ø§Ù†Ø¯Ù†</button>
    </div>

    <canvas id="passportCanvas" width="1000" height="1400"></canvas>

    <script>
        function processPassport() {
            const canvas = document.getElementById('passportCanvas');
            const ctx = canvas.getContext('2d');
            
            const name = document.getElementById('fullName').value.toUpperCase();
            const pNum = document.getElementById('pNum').value.toUpperCase();
            const dob = document.getElementById('dob').value;
            const expiry = document.getElementById('expiry').value;
            const gender = document.getElementById('gender').value;
            const photoFile = document.getElementById('photoUpload').files[0];

            if (!photoFile || !name) { alert("ØªÚ©Ø§ÛŒÛ• Ù‡Û•Ù…ÙˆÙˆ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù† Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•!"); return; }

            const template = new Image();
            template.src = 'blank_template.png'; // Ø¯Û•Ø¨ÛŽØª Ø¦Û•Ù… ÙˆÛŽÙ†Û•ÛŒÛ• Ù„Û• ØªÛ•Ù†ÛŒØ´Øª index.html Ø¨ÛŽØª

            template.onload = function() {
                canvas.style.display = "block";
                ctx.drawImage(template, 0, 0, 1000, 1400);

                // 1. Ù†ÙˆÙˆØ³ÛŒÙ†ÛŒ Ù†Ø§Ùˆ Ùˆ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†
                ctx.font = "bold 28px Arial";
                ctx.fillStyle = "#1a1a1a";
                ctx.fillText(name, 320, 425);

                // 2. Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ MRZ (Ø¨Û• Ù‡Û•Ù…Ø§Ù† Ù„Û†Ú˜ÛŒÚ©ÛŒ Ú©Û†Ø¯Û• Ù¾Ø§ÛŒØªÛ†Ù†Û•Ú©Û•Øª)
                ctx.font = "32px monospace";
                ctx.fillStyle = "black";
                let parts = name.split(" ");
                let lastName = parts[parts.length - 1];
                let firstNames = parts.slice(0, -1).join("<");
                let line1 = ("P<IRQ" + lastName + "<<" + firstNames).padEnd(44, "<");
                let line2 = (pNum + "<IRQ" + dob + gender + expiry).padEnd(44, "<");

                ctx.fillText(line1, 40, 1225);
                ctx.fillText(line2, 40, 1280);

                // 3. Ø¯Ø§Ù†Ø§Ù†ÛŒ ÙˆÛŽÙ†Û•ÛŒ Ú©Û•Ø³Û•Ú©Û•
                const reader = new FileReader();
                reader.onload = function(e) {
                    const userImg = new Image();
                    userImg.onload = function() {
                        ctx.globalAlpha = 0.9; // Ù‡Û•Ù…Ø§Ù† Opacity Ú©Û†Ø¯Û•Ú©Û•ÛŒ Ù¾Ø§ÛŒØªÛ†Ù†
                        ctx.drawImage(userImg, 35, 435, 245, 315);
                    }
                    userImg.src = e.target.result;
                }
                reader.readAsDataURL(photoFile);
            };
        }
    </script>
</body>
</html>
